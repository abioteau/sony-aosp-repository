From ba45f6dd05a9f578d816b73d6d12214e857442a9 Mon Sep 17 00:00:00 2001
From: Chih-Hung Hsieh <chh@google.com>
Date: Mon, 6 Nov 2017 14:01:16 -0800
Subject: [PATCH] Use -Werror in hardware/qcom/media

* Suppress existing warnings.

Bug: 66996870
Test: build with WITH_TIDY=1
Change-Id: Ib73eb0d5d7b8706e5b40c82ee44bd26fd5c2f501
---
 sdm845/libc2dcolorconvert/Android.mk | 2 ++
 sdm845/libstagefrighthw/Android.mk   | 2 ++
 sdm845/mm-core/Android.mk            | 6 ++++++
 3 files changed, 10 insertions(+)

diff --git a/sdm845/libc2dcolorconvert/Android.mk b/sdm845/libc2dcolorconvert/Android.mk
index 2a8bfa3..a7680ac 100755
--- a/sdm845/libc2dcolorconvert/Android.mk
+++ b/sdm845/libc2dcolorconvert/Android.mk
@@ -5,6 +5,8 @@ include $(CLEAR_VARS)
 LOCAL_SRC_FILES := \
         C2DColorConverter.cpp
 
+LOCAL_CFLAGS := -Wall -Werror
+
 LOCAL_C_INCLUDES := \
     $(TARGET_OUT_HEADERS)/adreno
 LOCAL_C_INCLUDES += $(TARGET_OUT_HEADERS)/qcom/display
diff --git a/sdm845/libstagefrighthw/Android.mk b/sdm845/libstagefrighthw/Android.mk
index 4979a21..727e1f5 100755
--- a/sdm845/libstagefrighthw/Android.mk
+++ b/sdm845/libstagefrighthw/Android.mk
@@ -38,6 +38,8 @@ ifeq ($(TARGET_USES_MEDIA_EXTENSIONS),true)
 LOCAL_CFLAGS += -DUSE_NATIVE_HANDLE_SOURCE
 endif
 
+LOCAL_CFLAGS += -Wall -Werror
+
 LOCAL_C_INCLUDES:= \
         frameworks/native/include/media/openmax \
         $(TARGET_OUT_HEADERS)/mm-core/omxcore/ \
diff --git a/sdm845/mm-core/Android.mk b/sdm845/mm-core/Android.mk
index 1601906..0c293eb 100755
--- a/sdm845/mm-core/Android.mk
+++ b/sdm845/mm-core/Android.mk
@@ -7,6 +7,12 @@ OMXCORE_CFLAGS := -g -O3 -DVERBOSE
 OMXCORE_CFLAGS += -O0 -fno-inline -fno-short-enums
 OMXCORE_CFLAGS += -D_ANDROID_
 OMXCORE_CFLAGS += -U_ENABLE_QC_MSG_LOG_
+OMXCORE_CFLAGS += \
+    -Wall \
+    -Werror \
+    -Wno-unused-function \
+    -Wno-unused-value \
+    -Wno-unused-variable \
 
 #===============================================================================
 #             Figure out the targets
-- 
2.13.0

